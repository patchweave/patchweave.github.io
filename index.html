<!DOCTYPE html>
<html lang="en">

<head>
  <title>PatchWeave - Automated Patch Transplantation</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="PatchWeave - Automated Patch Transplantation">
  <meta name="author" content="Ridwan Shariffdeen">
  <!-- Place this tag in your head or just before your close body tag. -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet">
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
   <link href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>

  <!-- Custom styles for this template -->
  <link href="css/resume.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css">


</head>

<body id="page-top">

  <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" >
    <a class="navbar-brand js-scroll-trigger" href="#page-top">
      <span class="d-block d-lg-none">Patch Weave</span>
      <span class="d-none d-lg-block">
      </span>
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link js-scroll-trigger" href="#overview">Overview</a>
        </li>
        <li class="nav-item">
          <a class="nav-link js-scroll-trigger" href="#workflow">Workflow</a>
        </li>
        <li class="nav-item">
          <a class="nav-link js-scroll-trigger" href="#tool">Tool</a>
        </li>
        <li class="nav-item">
          <a class="nav-link js-scroll-trigger" href="#subjects">Subjects</a>
        </li>
        <li class="nav-item">
          <a class="nav-link js-scroll-trigger" href="#evaluation">Evaluation</a>
        </li>
        <li class="nav-item">
          <a class="nav-link js-scroll-trigger" href="#apr">Artifacts</a>
        </li>

      </ul>
      <!-- Place this tag where you want the button to render. -->
     </div>
      <!-- Place this tag where you want the button to render. -->
      <a href="https://hub.docker.com/repository/docker/rshariffdeen/patchweave"><button class="btn btn-sm btn-dark" style="alignment: right; margin-bottom: 9px;"><i class="bi bi-arrow-down-circle-fill"></i> &nbsp; Docker Image</button></a>
      &nbsp; &nbsp;
      <a href="https://github.com/rshariffdeen/patchweave"><button class="btn btn-sm btn-dark" style="alignment: right; margin-bottom: 9px;"><i class="bi bi-github"></i>  Github Repo </button></a>
      &nbsp; &nbsp;
      <a href="TOSEM.pdf"><button class="btn btn-sm btn-dark" style="alignment: right; margin-bottom: 9px;"><i class="bi bi-file-earmark-text-fill"></i>  Download Pre-Print </button></a>

 </nav>

  <div class="container-fluid">

    <section class="resume-section d-flex align-items-center" id="overview">
      <div class="w-100">
        <br><br>
        <h1 style="text-transform: none" class="mb-0">Patch<span class="text-primary">Weave</span>
        </h1>
        <div style="text-transform: none"  class="subheading mb-5">Automated Patch Transplantation, Concolic Execution, Program Repair <br>
            <a href="https://hub.docker.com/repository/docker/rshariffdeen/patchweave"><img height="25" alt="Docker Pulls" src="https://img.shields.io/docker/pulls/rshariffdeen/patchweave?style=plastic"></a>
            &nbsp;
        </div>
        <p class="lead mb-5" align='justify'>
          <img src="img/main.png" style="display: table-cell;float: left; width: 500px; margin: 10px">
         Automated program repair is an emerging area which attempts to patch software errors and vulnerabilities.
In this work, we formulate and study a problem related to automated repair, namely automated patch transplantation. A
patch for an error in a donor program is automatically adapted and inserted into a “similar” target program. We observe that
despite standard procedures for vulnerability disclosures and publishing of patches, many un-patched occurrences remain
unprotected in the wild. One of the main reasons is the fact that various implementations of the same functionality may exist and
as a result published patches need to be modified and adapted. In this work, we therefore propose and implement a work-flow for transplanting patches. Our approach centers on identifying patch
insertion points via symbolic execution and context information to adapt the patches. Since the publication of patches make
an un-patched implementation more vulnerable, our proposed techniques should serve a long-standing need in practice.
          Software evolution is similar to biological evolution of organisms and previous work has attempted in introducing
          advancements in medical technology into automated program repair. An example would be the transpire of horizontal
          code transfer in software from allograft(transplantation from one body to another, instead of same body), where
          software errors have been eliminated via fix ingredients transplanted from similar but different applications. However,
          one of the challenges in allograft is the requirement to find a suitable donor where an organ can be found. Furthermore,
          the process of adaptation of a foreign organ in the recipient environment is likely to be complicated.

        </p>
              <div class="container">
            <h2 class="mb-5"> Publications</h2>
            <div class="abstract">
                <div style="float:left;">
                    <ul><li>
                        <h4><strong>Automated Patch Transplantation</strong></h4>
                        Ridwan Salihin Shariffdeen and Shin Hwei Tan and Mingyuan Gao and Abhik Roychoudhury<br>
                        Transactions on Software Engineering and Methodology (TOSEM), 2021 <br>
                        DOI: https://dl.acm.org/doi/10.1145/3412376
                    </li></ul>
                </div>
                <div style="float:left;">
                    <a href="TOSEM.pdf">
                        <img border="0" alt="PDFImage" src="img/pdf.png" width="25" height="25">
                    </a>
                </div>
            </div>
        </div>
      </div>
    </section>

    <hr class="m-0">

    <section class="resume-section p-3 p-lg-5 d-flex align-items-center" id="workflow">
      <div class="w-100">
        <h2 class="mb-5">Approach</h2>
        <img src="img/workflow.jpg" style="width: 100%">
        <p>
          Given Pa and Pb, our approach first extracts the syntactic edits between Pa and Pb to obtain
          a list of code segments for transplantation. Then, our approach executes the failing test tF in Pa and Pc to analyze the
          traces of the failing input. During the test executions, sanitizers
          are used to detect errors (i.e., the address sanitizer detects
          memory errors for identifying program locations that lead to
          the error), whereas the dynamic profiler collects information
          on statements executed. By combining symbolic analysis and
          diff analysis, we identify a list of candidate insertion points
          for each code segment in the patch. This is achieved through
          partial path condition calculation and computation of partial
          path condition dominance between Pa and Pc. After obtaining a list of candidate points for
          insertion, we generate a variable mapping between Pb and
          Pc with respect to the variables available at the insertion
          point and the variables used in the patch segment, through
          which we translate the patch to match the namespace of the
          recipient program Pc.
        </p>
      </div>
    </section>

    <hr class="m-0">

    <section class="resume-section p-3 p-lg-5 d-flex justify-content-center" id="tool">
      <div class="w-100">
        <br><br>
        <h2 class="mb-5">Tool</h2>
        <div class="resume-item d-flex flex-column flex-md-row justify-content-between mb-5" style="margin-top: -50px">
        Implemented in Python and C, this github repository contains the source for PatchWeave and the scripts for the data sets,
        including test suites, that we used for our experiments.
        </div>
        <div class="resume-item d-flex flex-column flex-md-row justify-content-between mb-5">
          <div class="resume-content">
            <h3 class="mb-0">Dependencies</h3>
            <ul>
              <li>
                LLVM - 3.4
              <li>
                LLVM - 7.0
              <li>
              Clang - 7.0
              <li>
              Clang Tools - <a href="https://github.com/rshariffdeen/clang-tools"> Github Repo </a>
              <li>
              Klee - Concolic Support Enabled (<a href="https://github.com/rshariffdeen/klee/tree/gen-bout" >Github Repo</a> )
              <li>
                Python - 2.7
            </ul>

            <h3 class="mb-0">Source Files</h3>
            <p>
              <a href="https://github.com/rshariffdeen/PatchWeave">Github Repository</a>
            </p>

            <h3 class="mb-0">Docker Image</h3>
            <a href="https://hub.docker.com/repository/docker/rshariffdeen/patchweave">Dockerhub Repository</a><br>
            Docker image only with the tool can be obtained using the tag <b>latest</b><br>
            Docker image with scripts to reproduce the experiments can be obtained using the tag <b>experiments</b>
          </div>

        </div>


      </div>

    </section>

    <hr class="m-0">

    <section class="resume-section p-3 p-lg-5 d-flex align-items-center" id="subjects">
      <div class="w-100">
        <h2 class="mb-5">Evaluation Subjects</h2>
        <div>
          <div class="resume-content">
            <table class="table table-hover table-responsive table-sm">
              <thead>
              <tr>
                <th scope="col">Name</th>
                <th scope="col">Description</th>
                <th scope="col">LOC</th>
                <th scope="col" style="width: 20%">Version Range</th>
                <th scope="col">Repository</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                <th scope="row">Jasper</th>
                <td> JasPer is a collection
                  of software for the
                  coding and manipulation of images. </td>
                <td>26k</td>
                <td>1.900.1 - 2.0.14 </td>
                <td><a href="https://github.com/mdadams/jasper">Repo </a></td>
              </tr>
              <tr>
                <th scope="row">Libsndfile</th>
                <td>libsndfile is a C library for reading and writing files containing sampled audio data.</td>
                <td>52k</td>
                <td>1.0.25 - 1.0.28</td>
                <td><a href="https://github.com/erikd/libsndfile">Repo </a></td>
              </tr>
              <tr>
                <th scope="row">OpenJpeg</th>
                <td>OpenJPEG is an open-source JPEG 2000 codec written in C language.</td>
                <td>200k</td>
                <td>1.0 - 2.3 </td>
                <td><a href="https://github.com/uclouvain/openjpeg">Repo </a></td>
              </tr>

              <tr>
                <th scope="row">LibMing</th>
                <td>
                  Ming is a Flash (SWF) output library. It can be used from PHP, Perl, Ruby, Python, C, C++, Java etc.
                </td>
                <td>66k</td>
                <td>0.4.3 - 0.4.8</td>
                <td><a href="https://github.com/libming/libming">Repo</a></td>
              </tr>
              <tr>
                <th scope="row">LibWebP</th>
                <td>Library to encode and decode images in WebP format</td>
                <td>67k</td>
                <td>0.1.2 - 1.0.2</td>
                <td><a href="https://chromium.googlesource.com/webm/libwebp">Repo </a></td>
              </tr>
              <tr>
                <th scope="row">LibTiff</th>
                <td>This software provides support for the Tag Image File Format (TIFF), a widely used format for storing image data
               </td>
                <td>70k</td>
                <td>3.9.6 - 4.0.9</td>
                <td><a href="https://github.com/vadz/libtiff">Repo </a></td>
              </tr>


              <tr>
                <th scope="row">Libzip</th>
                <td>C library for reading, creating, and modifying zip archives </td>
                <td>13k</td>
                <td>1.0.0 - 1.5.2</td>
                <td><a href="https://github.com/nih-at/libzip">Repo </a></td>
              </tr>
              <tr>
                <th scope="row">WavPack</th>
                <td>WavPack encode/decode library, command-line programs, and several plugins</td>
                <td>33k</td>
                <td>4.40.0 - 5.1.0</td>
                <td><a href="https://github.com/dbry/WavPack">Repo</a></td>
              </tr>
              </tbody>
            </table>

          </div>
        </div>
      </div>
    </section>



    <hr class="m-0">

    <section class="resume-section p-3 p-lg-5 d-flex align-items-center" id="evaluation">
      <div class="w-100">
        <br><br>
        <h2 class="mb-5">Evaluation</h2>
        <p style="margin-top: -50px">
          We evaluate PatchWeave on five classes of errors, including integer overflow, division by zero,
          null pointer dereference, heap buffer overflow and memory errors. We obtain our subjects from a public repository
          that contains exploits and steps to reproduce vulnerabilities published in the CVE database. For donor and target
          programs Pa and Pc, most evaluated programs are file processing programs. To evaluate the patch transplantation
          ability of PatchWeave, we studied the transplantation of patches on one application program processing an input
          format to another application program exercising similar functionality on the same input format.
          <br><br>
          Some of the results of our evaluation are given below, for full set please refer the paper.
          <br>
        </p>
        <br>
        <table class="table table-hover table-responsive">
          <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Donor</th>
            <th scope="col">Target</th>
            <th scope="col">Error Type</th>
            <th scope="col">Error Input</th>
            <th scope="col">Patch Time</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <th scope="row">1</th>
            <td>Jasper-1.900.3</td>
            <td>OpenJPEG-1.5.1</td>
            <td>Divide by Zero</td>
            <td>CVE-2016-8691</td>
            <td>5 min</td>
          </tr>
<!--          <tr>-->
<!--            <th scope="row">2</th>-->
<!--            <td>OpenJPEG-1.5.2</td>-->
<!--            <td>Jasper-1.900.2</td>-->
<!--            <td>Divide by Zero</td>-->
<!--            <td>CVE-2016-8691</td>-->
<!--            <td>8 min</td>-->
<!--          </tr>-->
<!--          <tr>-->
<!--            <th scope="row">3</th>-->
<!--            <td>Jasper-1.900.13</td>-->
<!--            <td>OpenJPEG-1.5.1</td>-->
<!--            <td>Integer Overflow</td>-->
<!--            <td>CVE-2016-9387</td>-->
<!--            <td>7.5 min</td>-->
<!--          </tr>-->
<!--          <tr>-->
            <th scope="row">2</th>
            <td>OpenJPEG-1.5.2</td>
            <td>Jasper-1.900.12</td>
            <td>Integer Overflow</td>
            <td>CVE-2016-9387</td>
            <td>8.5 min</td>
          </tr>

<!--          <tr>-->
<!--            <th scope="row">2</th>-->
<!--            <td>Jasper-2.0.13</td>-->
<!--            <td>OpenJPEG-1.5.1</td>-->
<!--            <td>Null Pointer Dereference</td>-->
<!--            <td>CVE-2017-6850</td>-->
<!--            <td>N/A</td>-->
<!--          </tr>-->

<!--          <tr>-->
<!--            <th scope="row">6</th>-->
<!--            <td>OpenJPEG-1.5.2</td>-->
<!--            <td>Jasper-1.900.30</td>-->
<!--            <td>Null Pointer Dereference</td>-->
<!--            <td>CVE-2016-9387</td>-->
<!--            <td>15 min</td>-->
<!--          </tr>-->

<!--          <tr>-->
<!--            <th scope="row">7</th>-->
<!--            <td>Jasper-1.900.3</td>-->
<!--            <td>OpenJPEG-1.3</td>-->
<!--            <td>Divide by Zero</td>-->
<!--            <td>CVE-2016-8692</td>-->
<!--            <td>3.5 min</td>-->
<!--          </tr>-->
<!--          <tr>-->
<!--            <th scope="row">8</th>-->
<!--            <td>OpenJPEG-1.4</td>-->
<!--            <td>Jasper-1.900.2</td>-->
<!--            <td>Divide by Zero</td>-->
<!--            <td>CVE-2016-8692</td>-->
<!--            <td>5.5 min</td>-->
<!--          </tr>-->

<!--          <tr>-->
<!--            <th scope="row">9</th>-->
<!--            <td>Jasper-1.900.14</td>-->
<!--            <td>OpenJPEG-2.1.0</td>-->
<!--            <td>Unsigned Integer Overflow</td>-->
<!--            <td>CVE-2016-9387</td>-->
<!--            <td>6 min</td>-->
<!--          </tr>-->
<!--          <tr>-->
<!--            <th scope="row">10</th>-->
<!--            <td>OpenJPEG-2.1.1</td>-->
<!--            <td>Jasper-1.900.13</td>-->
<!--            <td>Unsigned Integer Overflow</td>-->
<!--            <td>CVE-2016-9387</td>-->
<!--            <td>18 min</td>-->
<!--          </tr>-->

<!--          <tr>-->
<!--            <th scope="row">11</th>-->
<!--            <td>OpenJPEG-1.5.1</td>-->
<!--            <td>LibWebP-0.3.0</td>-->
<!--            <td>Signed Integer Overflow</td>-->
<!--            <td>CVE-2016-9262</td>-->
<!--            <td>2.5 min</td>-->
<!--          </tr>-->
<!--          <tr>-->
<!--            <th scope="row">12</th>-->
<!--            <td>Jasper-1.900.4</td>-->
<!--            <td>LibWebP-0.2.0</td>-->
<!--            <td>Shift Overflow</td>-->
<!--            <td>CVE-2016-9830</td>-->
<!--            <td>4.5 min</td>-->
<!--          </tr>-->
           <tr>
            <th scope="row">3</th>
            <td>LibWebP-0.3.0</td>
            <td>Jasper-1.900.3</td>
            <td>Shift Overflow</td>
            <td>CVE-2016-9830</td>
            <td>11 min</td>
          </tr>
<!--          <tr>-->
<!--            <th scope="row">14</th>-->
<!--            <td>OpenJPEG-1.5.2</td>-->
<!--            <td>Jasper-1.900.13</td>-->
<!--            <td>Heap Buffer Overflow</td>-->
<!--            <td>CVE-2016-9390</td>-->
<!--            <td>N/A </td>-->
<!--          </tr>-->
<!--          <tr>-->
<!--            <th scope="row">15</th>-->
<!--            <td>Jasper-1.900.14</td>-->
<!--            <td>OpenJPEG-2.1.0</td>-->
<!--            <td>Heap Buffer Overflow</td>-->
<!--            <td>CVE-2016-9390</td>-->
<!--            <td>N/A </td>-->
<!--          </tr>-->
<!--          <tr>-->
<!--            <th scope="row">16</th>-->
<!--            <td>Jasper-1.900.17</td>-->
<!--            <td>OpenJPEG-1.5.2</td>-->
<!--            <td>Unsigned Integer Overflow</td>-->
<!--            <td>CVE-2016-9393</td>-->
<!--            <td>12 min</td>-->
<!--          </tr>-->
          <tr>
            <th scope="row">5</th>
            <td>LibTiff-3.8.0</td>
            <td>Jasper-1.900.8</td>
            <td>Memory Write Error</td>
            <td>CVE-2016-8884</td>
            <td>26 min </td>
          </tr>
<!--          <tr>-->
<!--            <th scope="row">18</th>-->
<!--            <td>Libsndfile-1.0.26</td>-->
<!--            <td>WavPack-5.1.0</td>-->
<!--            <td>Shift Overflow</td>-->
<!--            <td>CVE-2017-6828</td>-->
<!--            <td>N/A </td>-->
<!--          </tr>-->
<!--          <tr>-->
<!--            <th scope="row">19</th>-->
<!--            <td>Jasper-1.900.13</td>-->
<!--            <td>Jasper-1.900.2</td>-->
<!--            <td>Integer Overflow</td>-->
<!--            <td>CVE-2016-9387</td>-->
<!--            <td>8 min </td>-->
<!--          </tr>-->
<!--          <tr>-->
<!--            <th scope="row">20</th>-->
<!--            <td>LibMing-0.4.8</td>-->
<!--            <td>LibMing-0.4.6</td>-->
<!--            <td>Divide by Zero</td>-->
<!--            <td>CVE-2016-9265</td>-->
<!--            <td>5.5 min </td>-->
<!--          </tr>-->
<!--           <tr>-->
<!--            <th scope="row">21</th>-->
<!--            <td>LibMing-0.4.8</td>-->
<!--            <td>LibMing-0.4.6</td>-->
<!--            <td>Negative Shift</td>-->
<!--            <td>CVE-2016-9266</td>-->
<!--            <td>5.5 min </td>-->
<!--          </tr>-->
           <tr>
            <th scope="row">6</th>
            <td>LibTiff-4.0.8</td>
            <td>LibTiff-4.0.0</td>
            <td>Heap Buffer Overflow</td>
            <td>CVE-2017-14039</td>
            <td>26 min </td>
          </tr>
           <tr>
            <th scope="row">7</th>
            <td>Libsndfile-master</td>
            <td>Libsndfile-1.0.26</td>
            <td>Buffer Overflow</td>
            <td>CVE-2017-8365</td>
            <td>17 min </td>
          </tr>
           <tr>
            <th scope="row">8</th>
            <td>LibZip-1.3.0</td>
            <td>LibZip-1.1.2</td>
            <td>Buffer Overflow</td>
            <td>CVE-2017-14107</td>
            <td>44 min </td>
          </tr>
          </tbody>
        </table>
      </div>
    </section>

    <hr class="m-0">
 <section class="resume-section p-3 p-lg-5 d-flex align-items-center" id="apr">
      <div class="w-100">
        <br><br>
        <h2 class="mb-5">Artifacts</h2>
        We provide a replication package for our experiments with PatchWeave on the our data-set in a Docker container, which consists of setup scripts/configuration
        files to re-run the experiments. The Docker environment consists of all dependencies for PatchWeave, KLEE, and other subjects in the benchmarks.

        <br><br>
        You can access the replication package via Dockerhub at this <a href="https://hub.docker.com/repository/docker/rshariffdeen/patchweave">link </a> (use the tag experiments)
        by using the following command: <br>
        <pre><code>docker pull rshariffdeen/patchweave:experiments</code></pre>

        For readability, we further provide the list of patches <a href="patches.html">here</a>


      </div>
    </section>

  </div>

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for this template -->
  <script src="js/resume.min.js"></script>

</body>


</html>
